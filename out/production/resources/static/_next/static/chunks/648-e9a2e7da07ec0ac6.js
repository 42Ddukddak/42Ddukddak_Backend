"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{4228:function(e,t,s){s.d(t,{Z:function(){return i}});var r=s(5893),o=s(1009),n=s(6648),l=s(7294);function i(e){let{svg:t,text:s,cancel:i,reservedTime:a}=e,[c,d]=(0,l.useContext)(n.ModalContext);return(0,r.jsxs)("button",{type:"button",onClick:()=>{!i&&s&&d({isConfirm:!0,reservedTime:a})},className:(0,o.y)(i?"bg-violet-300":"bg-violet-600","text-center  rounded-2xl px-2 transition-colors hover:text-white focus:text-white focus:outline-none"),children:[t,s?(0,r.jsx)("div",{className:"p-3 font-semibold text-xl",children:s}):null]})}},7970:function(e,t,s){s.d(t,{Z:function(){return u}});var r=s(5893),o=s(1009),n=s(5675),l=s.n(n),i=s(4732),a=s(7294),c=s(1664),d=s.n(c);function u(e){let{children:t}=e,[s,n]=(0,a.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-lg font-medium fixed text-gray-800 top-8 left-8 flex flex-col items-center rounded-full ",children:[(0,r.jsx)("div",{className:(0,o.y)(s?"animate-spin":"","rounded-full flex justify-center items-center"),onClick:()=>n(!s),children:(0,r.jsx)(l(),{src:i.Z,alt:"logo",placeholder:"blur",className:"w-12 h-12 shadow-xl rounded-full border border-gray-400 my-hover"})}),s&&(0,r.jsxs)("div",{className:"mt-2 space-y-2 flex flex-col",children:[(0,r.jsx)(d(),{href:"/",children:(0,r.jsx)("button",{className:"bg-white rounded-full border self-center border-gray-200 w-11 h-11 hover:bg-violet-400 transition shadow-xl my-hover",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{fill:"currentColor","fill-opacity":"0",d:"M6 8L12 3L18 8V20H16V13L15 12H9L8 13V20H6V8Z",children:(0,r.jsx)("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.9s",dur:"0.15s",values:"0;0.3"})}),(0,r.jsxs)("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",children:[(0,r.jsx)("path",{"stroke-dasharray":"21","stroke-dashoffset":"21",d:"M5 21H19",children:(0,r.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.2s",values:"21;0"})}),(0,r.jsx)("path",{"stroke-dasharray":"15","stroke-dashoffset":"15",d:"M5 21V8M19 21V8",children:(0,r.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",begin:"0.2s",dur:"0.2s",values:"15;0"})}),(0,r.jsx)("path",{"stroke-dasharray":"24","stroke-dashoffset":"24",d:"M9 21V13H15V21",children:(0,r.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",begin:"0.4s",dur:"0.4s",values:"24;0"})}),(0,r.jsx)("path",{"stroke-dasharray":"26","stroke-dashoffset":"26",d:"M2 10L12 2L22 10",children:(0,r.jsx)("animate",{fill:"freeze",attributeName:"stroke-dashoffset",begin:"0.5s",dur:"0.4s",values:"26;0"})})]})]})})}),(0,r.jsx)(d(),{href:"/mypage",children:(0,r.jsx)("button",{className:"bg-white rounded-full border self-center border-gray-200 w-11 h-11 hover:bg-violet-400 transition shadow-xl my-hover",children:"My"})}),(0,r.jsx)(d(),{href:"/developer",children:(0,r.jsx)("button",{className:"bg-white rounded-full border self-center border-gray-200 w-11 h-11 hover:bg-violet-400 transition shadow-xl my-hover",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"})})})}),(0,r.jsx)(d(),{href:"/logout",children:(0,r.jsx)("button",{className:"bg-white rounded-full self-center border-gray-200 w-11 h-11 hover:bg-violet-400 transition shadow-xl my-hover",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 22",children:(0,r.jsx)("path",{fill:"currentColor",d:"M17 1v1h1v4h-1V5h-1V3H6v16h10v-2h1v-1h1v4h-1v1H5v-1H4V2h1V1h12m-4 5h2v1h1v1h1v1h1v1h1v2h-1v1h-1v1h-1v1h-1v1h-2v-2h1v-1h1v-1H8v-2h7V9h-1V8h-1V6Z"})})})})]})]}),(0,r.jsx)("div",{children:t})]})}},6619:function(e,t,s){s.d(t,{Z:function(){return l}});var r=s(5893),o=s(4228),n=s(7294);function l(e){let{title:t,subText:s,setIsOpen:l,setTime:i}=e,[a,c]=(0,n.useState)("");return(0,r.jsx)("div",{className:"flex justify-center items-center h-screen fixed z-[2]",children:(0,r.jsx)("div",{className:"bg-black h-screen bg-opacity-40 w-screen flex justify-center items-center fixed top-0 left-0",children:(0,r.jsxs)("div",{className:"bg-white bg-opacity-100 flex flex-col justify-between items-center border rounded-3xl w-[480px] h-96 shadow-xl",children:[(0,r.jsx)("h2",{className:"text-3xl mt-12 text-violet-700",children:t}),(0,r.jsx)("span",{className:"text-xl font-semibold",children:s}),i?(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-xl font-semibold",children:"시간"}),(0,r.jsx)("input",{onChange:e=>{c(e.target.value)},type:"time",className:"border-2 border-gray-300 rounded-lg w-full"})]}):null,(0,r.jsxs)("div",{className:"flex w-1/2 mb-10 justify-between items-center",children:[(0,r.jsx)(o.Z,{text:"취소",cancel:!0}),(0,r.jsx)(o.Z,{text:"확인",reservedTime:a})]})]})})})}},2338:function(e,t,s){s.d(t,{Z:function(){return g}});var r=s(5893),o=s(7294),n=s(4228),l=s(4593),i=s(8e3),a=s.n(i),c=s(5888),d=s(615),u=s(1009),x=s(6092),h=s(6648),m=s(6154),v=s(6619),f=s(7140);let p={HOSTLEAVE:"방장이 방을 떠나서 방이 폭파되었습니다.",SUCCESS_RESERVATION:"예약이 확정되었어요.\uD83D\uDC4D 약속을 지키지 않을 시 신고 당하실 수 있습니다❗️",FAILED_RESERVATION:"예약 확정에 실패했습니다.\uD83D\uDE1E",ROOM_DESTROYED:"시간이 지나서 방이 폭파되었습니다.",THREE_MINUTE_LEFT:"방 폭파까지 3분 남았습니다."};function g(e){var t,s,i,g;let{mypage:j,showReservation:b}=e,w=(0,o.useRef)(),[y,N]=(0,o.useState)(),[E,k]=(0,o.useState)([]),{inputMessage:C,handleInputMessage:I,handleDeleteInputMessage:T}=(0,c.Z)(),S=(0,o.useRef)(null),[Z,M]=(0,o.useContext)(h.AppContext),O=(0,d.Z)("intraId"),[L,R]=(0,o.useState)({participantsNum:1}),[D,A]=(0,o.useState)(!1),[V,_]=(0,o.useState)(!1),[z,H]=(0,o.useContext)(h.ModalContext),[B,J]=(0,o.useState)(),[W,q]=(0,o.useState)(""),[F,K]=(0,o.useState)(!1),[U,G]=(0,o.useState)(!1),[P,Y]=(0,o.useState)([]);(0,o.useEffect)(()=>{var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[E]),(0,o.useEffect)(()=>{y&&(k([...E,y]),R({remainingTime:y.remainingTime,participantsNum:y.participantsNum}))},[y]),(0,o.useEffect)(()=>{if(j&&-1!==b){let e=async()=>{await m.Z.get("/api/reserved/".concat(b,"/chat-message")).then(e=>{console.log("reservedChatMessages"),Y(e.data)})};e()}},[b]);let Q=async()=>{try{var e;await m.Z.get("/api/chat/private/".concat(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomId)).then(e=>{e.data.message&&k(e.data),R({remainingTime:e.data.remainingTime,participantsNum:e.data.participantsNum})})}catch(e){console.log("private chatting get",e)}};(0,o.useEffect)(()=>{var e,t;(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomId)&&(er(null===(t=Z.roomInfo)||void 0===t?void 0:t.roomId),Q())},[Z.roomInfo]),(0,o.useEffect)(()=>{D&&(F?alert(p.HOSTLEAVE):alert(p.ROOM_DESTROYED),M({ddukddak:!1,context:!1,roomInfo:void 0}))},[D]);let X=async()=>{try{var e,t;await m.Z.post("/api/chat/private/".concat(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomId,"/destroy"),"".concat(null===(t=Z.roomInfo)||void 0===t?void 0:t.roomId)).then(()=>{H({isConfirm:!1}),_(!1)})}catch(e){console.log("requestDestroy err: ",e)}},$=async()=>{console.log("reservedTime: ",z.reservedTime);try{var e;await m.Z.post("/api/reserved/".concat(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomId),null,{params:{reservedTime:z.reservedTime}}).then(e=>{200===e.status?alert(p.SUCCESS_RESERVATION):alert(p.FAILED_RESERVATION)}).then(()=>{H({isConfirm:!1}),_(!1),G(!1)})}catch(e){console.log("requestReservation err: ",e)}},ee=async()=>{try{var e;await m.Z.post("/api/chat/private/".concat(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomId,"/leave"),null,{params:{intraId:O}}).then(e=>{200===e.status?M({ddukddak:!1,context:!1,roomInfo:void 0}):console.log("leave 실패")}).then(()=>{H({isConfirm:!1}),_(!1)})}catch(e){console.log("request Leave: ",e)}};(0,o.useEffect)(()=>{z.isConfirm&&("hostLeave"===W?X():"reservation"===W?$():"guest"===W&&ee())},[z.isConfirm]);let et=async()=>{var e;(null===(e=Z.roomInfo)||void 0===e?void 0:e.login)===O?(q("hostLeave"),J({title:f.Z.HOSTLEAVE.title,subText:f.Z.HOSTLEAVE.subText}),_(!0)):(q("guest"),J({title:f.Z.LEAVE.title,subText:f.Z.LEAVE.subText}),_(!0))},es=()=>{if(C){try{var e,t;null===(e=w.current)||void 0===e||e.send("/pub/chat/message/private",{},JSON.stringify({roomId:null===(t=Z.roomInfo)||void 0===t?void 0:t.roomId,sender:O,message:C}))}catch(e){console.log("send",e)}T()}},er=e=>{w.current=l.L.over(()=>{try{let e=new(a())("http://localhost/stomp/chat");return e}catch(e){return console.log("SockJS",e)}}),k([]),w.current.connect({},()=>{try{var t;null===(t=w.current)||void 0===t||t.subscribe("/sub/chat/room/".concat(e),e=>{'"OK"'===e.body?(K(!0),A(!0)):"1001"===e.body?alert(p.THREE_MINUTE_LEFT):"1002"===e.body?A(!0):N(JSON.parse(e.body))},{})}catch(e){return console.log("sub",e)}})},eo=E.map((e,t)=>(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:(0,u.y)(e.sender===O?"items-end":"","flex flex-col justify-end pr-4"),children:[(0,r.jsxs)("div",{className:(0,u.y)(e.sender===O?"":"flex-row-reverse","flex justify-end items-end"),children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-light px-2",children:[(0,x.m)(e.time)," "]}),(0,r.jsx)("div",{className:"px-2 py-2  border border-gray-300 rounded-xl bg-violet-300 text-white",children:(0,r.jsx)("p",{children:e.message})})]}),e.sender===O?null:(0,r.jsx)("span",{className:"text-xs text-gray-600 mr-1",children:"신고"})]})},t)),en=P.map((e,t)=>(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:(0,u.y)(e.sender===O?"items-end":"","flex flex-col justify-end pr-4"),children:[(0,r.jsxs)("div",{className:(0,u.y)(e.sender===O?"":"flex-row-reverse","flex justify-end items-end"),children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-light px-2",children:[(0,x.m)(e.time)," "]}),(0,r.jsx)("div",{className:"px-2 py-2  border border-gray-300 rounded-xl bg-violet-300 text-white",children:(0,r.jsx)("p",{children:e.message})})]}),e.sender===O?null:(0,r.jsx)("span",{className:"text-xs text-gray-600 mr-1",children:"신고"})]})},t));return(0,r.jsxs)("div",{className:"xl:col-span-2 flex flex-col justify-between border-2 rounded-3xl shadow-xl px-5 py-4 space-y-2 h-screen max-h-[50vh] xl:min-h-[85vh] bg-indigo-300",children:[V?(0,r.jsx)(v.Z,{title:null==B?void 0:B.title,subText:null==B?void 0:B.subText,setIsOpen:_,setTime:U}):null,j?null:(0,r.jsxs)("div",{className:"border rounded-full bg-white shadow-md flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex flex-col pl-5",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("h3",{className:"text-lg text-gray-800 font-bold",children:null===(t=Z.roomInfo)||void 0===t?void 0:t.roomName}),(0,r.jsxs)("div",{className:"flex self-center space-x-1 justify-center items-center border rounded-full px-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 text-gray-600",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})}),(0,r.jsx)("span",{className:"text-gray-500 text-sm self-center",children:(null==L?void 0:L.participantsNum)||(null===(s=Z.roomInfo)||void 0===s?void 0:s.participantsNum)})]})]}),(0,r.jsxs)("span",{className:"text-gray-400 text-sm",children:["방 폭파까지 ",(null==L?void 0:L.remainingTime)||(null===(i=Z.roomInfo)||void 0===i?void 0:i.remainingTime),"분 남았습니다."]})]}),(0,r.jsxs)("div",{className:" font-bold flex justify-center items-center space-x-2 mr-2",children:[(null===(g=Z.roomInfo)||void 0===g?void 0:g.login)===O?(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{if(L.participantsNum>1){var e;q("reservation"),G(!0),J({title:f.Z.RESERVATION.title,subText:"".concat(null===(e=Z.roomInfo)||void 0===e?void 0:e.roomName," ").concat(f.Z.RESERVATION.subText)}),_(!0)}else alert("혼자일때 예약해서 뭐하게 임마~~!!")},type:"button",className:" hover:text-violet-500 transition-colors",children:"뚝딱뚝딱"}),(0,r.jsx)("div",{className:"w-[2px] h-6 bg-black"})]}):null,(0,r.jsx)("button",{onClick:et,type:"button",className:"hover:text-violet-500 transition-colors",children:"Leave"})]})]}),(0,r.jsxs)("div",{className:"space-y-4 flex-1 py-4 overflow-auto xl:min-h-[69vh] max-h-[50vh]",children:[j&&-1!==b?en:eo,(0,r.jsx)("div",{ref:S})]}),j?null:(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"flex relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Message",required:!0,value:C,onChange:I,onKeyDown:e=>{e.nativeEvent.isComposing||e.nativeEvent.isComposing||"Enter"!==e.key||es()},className:"overflow-visible peer border rounded-xl w-full placeholder:pl-2 py-2 mt-2 pl-3 pr-[58px] focus:outline-none focus:ring-2 focus:ring-violet-600 focus:border-transparent"}),(0,r.jsx)("div",{className:"absolute right-2 -bottom-[0.5px]",children:(0,r.jsx)(n.Z,{svg:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",onClick:es,className:"w-6 h-6 peer-invalid:bg-gray-800 my-1",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})})]})})]})}},7665:function(e,t,s){s.d(t,{Z:function(){return i}});var r=s(5893),o=s(615),n=s(6648),l=s(7294);function i(e){var t;let{text:s,isSearch:i,mypage:a}=e,[c,d]=(0,l.useContext)(n.AppContext),u=(0,o.Z)("intraId");return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex space-x-2 m-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-violet-950",children:s}),i?(0,r.jsx)("div",{className:"mt-1 flex justify-center items-center rounded-full cursor-pointer w-7 h-7 hover:text-violet-800 hover:bg-violet-200 hover:shadow-md transition-colors",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}):null]}),a||(null===(t=c.roomInfo)||void 0===t?void 0:t.login)===u?null:(0,r.jsx)("div",{onClick:()=>{d({ddukddak:c.ddukddak,context:!c.context,roomInfo:c.roomInfo})},className:"m-1",children:(0,r.jsx)("div",{className:"flex items-center justify-center rounded-full cursor-pointer w-8 h-8 hover:text-violet-800 hover:bg-violet-200 hover:shadow-md transition-colors",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})})})})]})}},7140:function(e,t){t.Z={HOSTLEAVE:{title:"❗️방 떠나기 경고❗️",subText:"방장이 방을 나가게 되면 방이 사라집니다."},RESERVATION:{title:"뚝딱뚝딱 \uD83C\uDF89",subText:"예약을 확정하시겠습니까?\uD83E\uDD73"},MAKE_ROOM:{title:"방만들기⚒",subText:"대화방을 만듭니다.\uD83C\uDF1D"},REPORT:{title:"",subText:""},RESERVATION_Cancel:{title:"",subText:""},CHANGE_ROOM:{title:"❗️방 이동 경고❗️",subText:"채팅방은 ⒈개만 들어가실 수 있어요. 현재 방을 떠나시나요?"},ENTER_ROOM:{title:"\uD83D\uDC4F방 입장\uD83D\uDC4B",subText:"해당 방에 들어가시겠습니까?? \uD83D\uDCAC"},LEAVE:{title:"방 나가기\uD83D\uDC4B",subText:"해당 방을 정말로 떠나시겠습니까?\uD83D\uDE4A"}}},6092:function(e,t,s){s.d(t,{m:function(){return r}});let r=e=>{if(void 0!==e){let t=new Date(e),s=t.getHours(),r=t.getMinutes();t.getSeconds();let o=s>=12?"오후":"오전",n="".concat(o," ").concat(s%12,":").concat(r.toString().padStart(2,"0"));return n}return""}},615:function(e,t,s){s.d(t,{Z:function(){return r}});function r(e){if("undefined"==typeof document)return null;let t=document.cookie.split(";");for(let s=0;s<t.length;s++){let r=t[s].trim();if(r.startsWith("".concat(e,"=")))return r.substring(e.length+1)}return null}},5888:function(e,t,s){s.d(t,{Z:function(){return n}});var r=s(7294),o=e=>{let t=RegExp("시발|개새끼|씨발|엿|느금|닥쳐|닭쳐|병신|미친|니미|평신|섹스|꺼져|꺼저|면상|빻았다|빠았다|유승준|뻐큐|뻑유|퍽유|fuck|sex|꼬추|보지|자지|짬지|씹|창녀|지랄|좆|슴가|아가리|새끼|개년|개쓰레기|개씨발|개지랄|개자식|거지새끼|걸레|광녀|꼴통|남창|nigger|니미럴|니그로|죽어|딸딸이|똘마니|똘추|똥꼬|부랄|랄부|빠구리|빨통|쌍놈|쌍년|썅|애미|애비","gi");return e.replace(t,"***")},n=()=>{let[e,t]=(0,r.useState)("");return{inputMessage:e,handleInputMessage:e=>{let s=e.target.value.trim().replace(" ",""),r=o(s);r.includes("*")?alert("욕설 사용하면 돼요~?? 안돼요~??"):t(e.target.value)},handleDeleteInputMessage:()=>{t("")}}}},1009:function(e,t,s){s.d(t,{y:function(){return r}});function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.join(" ")}},6648:function(e,t,s){s.r(t),s.d(t,{AppContext:function(){return N},ModalContext:function(){return E},default:function(){return k}});var r=s(5893),o=s(7970),n=s(1163),l=s(7294),i=s(5888),a=s(4228),c=s(6154),d=s(615),u=s(6619),x=s(7140);function h(){let{inputMessage:e,handleInputMessage:t,handleDeleteInputMessage:s}=(0,i.Z)(),[o,n]=(0,l.useState)(!1),[h,m]=(0,l.useContext)(E),[v,f]=(0,l.useContext)(N),[p,g]=(0,l.useState)(!1),j=async()=>{try{await c.Z.post("/api/chat/ddukddak",{roomName:e,login:(0,d.Z)("intraId")}).then(e=>{console.log("makeRoom response",e.data),f({ddukddak:!v.ddukddak,context:v.context,roomInfo:e.data})}).then(()=>{m({isConfirm:!1}),s(),n(!1),g(!1)})}catch(e){console.log("makeRoom post",e)}};(0,l.useEffect)(()=>{h.isConfirm&&p&&j()},[h.isConfirm]);let b=()=>{e&&(g(!0),n(!0))};return(0,r.jsxs)("div",{className:"flex justify-center items-center xl:col-span-2",children:[o?(0,r.jsx)(u.Z,{title:x.Z.MAKE_ROOM.title,subText:"".concat(e," ").concat(x.Z.MAKE_ROOM.subText),setIsOpen:n,setTime:!1}):null,(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,r.jsxs)("div",{className:"my-flex-center space-y-4 bg-violet-600 rounded-3xl shadow-xl relative py-6 px-10",children:[(0,r.jsx)("h2",{className:"font-semibold text-3xl text-center text-white mt-10",children:"어떤 뚝딱을 만들고 싶나요?"}),(0,r.jsx)("input",{type:"text",required:!0,value:e,onChange:t,onKeyDown:e=>{e.nativeEvent.isComposing||e.nativeEvent.isComposing||"Enter"!==e.key||b()},placeholder:"방 제목을 입력해주세요.",className:"border py-3 rounded-full peer placeholder:text-center shadow-sm px-16 my-hover"}),(0,r.jsx)("div",{onClick:b,className:"absolute right-14 top-[105px]",children:(0,r.jsx)(a.Z,{svg:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M483.424 24.638L449.83 39.98c.944.974 1.864 1.99 2.754 3.068c3.544 4.29 6.546 8.89 9.07 13.745l21.77-32.155zm-221.18 14.426l4.217 42.527c7.223-6.983 14.875-13.594 22.97-19.575l-27.186-22.95zm143.17 2.358c-2 .03-4.06.133-6.18.298c-11.58.906-24.367 3.983-37.02 7.41l23.55 36.178l.404.62l.297.68c3.1 7.08 2.3 14.488-.006 21.41c-2.308 6.924-6.405 13.565-12.487 18.53c-6.082 4.962-14.756 8.037-23.813 6.118c-9.056-1.92-17.6-8.213-25.506-18.803l-1.718-2.305l-1.104-48.535c-25.135 12.94-47.54 34.326-66.178 57.047l17.14 9.428l2.892 1.59l1.177 3.08c4.892 12.782 5.147 26.122-1.43 37.13c-6.575 11.01-18.66 18.744-35.435 24.293l-6.9 2.285l-11.653-19.82c-1.71 3.762-3.41 7.56-5.093 11.43L199.126 298.11l-2.75-61.597c-10.444 24.205-21.82 48.42-36.09 70.063C119.643 368.216 28.322 462.01 28.322 462.01l-.07.072l-.07.07c-3.905 3.85-3.91 5.573-3.475 7.693c.29 1.418 1.348 3.368 3.168 5.43l97.166-78.713l-84.007 87.3c5.778 2.305 11.906 3.587 15.895 3.495c6.885-6.482 66.713-62.5 107.11-88.644c38.117-24.67 69.79-54.084 106.32-82.045l12.213-70.723l.37-2.147l1.312-1.74c6.783-8.997 15.585-14.236 24.506-15.33a31.905 31.905 0 0 1 6.588-.113c6.464.56 12.5 3.047 17.584 6.59c11.895 8.287 20.172 22.808 18.008 37.68c6.76-3 13.436-6.003 19.883-9.153c20.67-10.1 38.705-21.33 51.063-37.56c-7.023-.544-13.58-3.672-19.03-7.846c-7.455-5.707-13.412-13.558-17.25-22.2c-3.84-8.64-5.723-18.287-2.974-27.615c2.75-9.326 11.142-17.274 22.833-20.01l.645-.153l45.662-3.797c.92-5.208 1.667-10.42 2.19-15.58c1.022-10.1 1.175-19.927.35-29.187l-28.927 31.25l19.88-64.613c-1.88-3.562-4.056-6.88-6.556-9.907c-7.064-8.55-16.195-12.217-27.474-12.957a72.25 72.25 0 0 0-5.82-.134zm-65.937 5.773l1.316 57.93c5.447 6.628 10.038 9.285 13.098 9.933c3.385.717 5.85-.13 8.702-2.457c2.852-2.327 5.483-6.348 6.79-10.272c1.253-3.757 1.01-7.105.624-8.23l-30.53-46.903zm-136.057 64.69l37.62 63.984c10.068-4.252 16.137-9.108 18.94-13.802c3.017-5.05 3.41-10.74.962-18.547l-57.522-31.636zm284.063 45.76l-78.336 6.513c-6.528 1.622-8.23 3.973-9.252 7.443c-1.05 3.558-.457 9.338 2.156 15.218c2.614 5.88 7.085 11.648 11.745 15.217c4.102 3.14 7.867 4.322 10.924 4.105c.6-.433 1.22-.876 2.16-1.576a960.486 960.486 0 0 0 10.226-7.758c8.388-6.43 19.428-14.995 30.408-23.547c10.038-7.82 12.08-9.442 19.97-15.616zM312.38 244.497c-.48.007-.957.04-1.43.097c-3.424.42-7.092 2.18-11.067 6.868l-16.496 95.523l49.18-76.508c2.014-7.113-2.495-17.326-9.926-22.504c-2.873-2.002-5.883-3.162-8.806-3.422a14.095 14.095 0 0 0-1.453-.054zm74.02 29.52a328.805 328.805 0 0 1-7.677 3.886c-5.127 2.505-10.308 4.887-15.488 7.232l27.76 17.047l-4.594-28.166z"})})})})]}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"뚝딱은 모임, 예약, 파티, 약속, 집합 등을 통칭합니다."})]})]})}var m=s(2338),v=s(7665),f=s(4593),p=s(8e3),g=s.n(p),j=s(1009),b=s(6092);function w(){let{inputMessage:e,handleInputMessage:t,handleDeleteInputMessage:s}=(0,i.Z)(),[o,n]=(0,l.useState)(),[c,u]=(0,l.useState)([]),[x,h]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),w=(0,l.useRef)(),y=(0,l.useRef)(null),N=(0,d.Z)("intraId");(0,l.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[c]);let E=c.map((e,t)=>(0,r.jsxs)("div",{className:(0,j.y)(e.sender===N?"flex-row-reverse":"","flex items-start text-gray-800 space-x-2 text-sm"),children:[e.sender===N?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mt-2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 mt-2",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),(0,r.jsx)("div",{className:"p-2 border border-gray-300 rounded-md",children:(0,r.jsx)("p",{children:e.message})}),(0,r.jsx)("span",{className:"self-end",children:(0,b.m)(e.time)})]},t));(0,l.useEffect)(()=>{x||(C("999"),h(!0))});let k=()=>{if(e){try{var t;null===(t=w.current)||void 0===t||t.send("/pub/chat/message/public",{},JSON.stringify({roomId:m,sender:N,message:e}))}catch(e){console.log(e)}s()}};(0,l.useEffect)(()=>{o&&u([...c,o])},[o]);let C=e=>{w.current=f.L.over(()=>{try{let e=new(g())("http://localhost/stomp/chat");return e}catch(e){return console.log(e)}}),u([]),w.current.connect({},()=>{try{var t;null===(t=w.current)||void 0===t||t.subscribe("/sub/chat/public/".concat(e),e=>{n(JSON.parse(e.body))},{})}catch(e){return console.log(e)}}),p("".concat(e))};return(0,r.jsxs)("div",{className:"flex flex-col justify-between border-2 rounded-3xl py-4 px-5 shadow-2xl h-screen max-h-[50vh] xl:min-h-[85vh] z-[1]",children:[(0,r.jsx)(v.Z,{text:"전체 채팅"}),(0,r.jsxs)("div",{className:"space-y-4 py-4 flex-1 overflow-auto max-h-[44vh] xl:max-h-[70vh]",children:[E,(0,r.jsx)("div",{ref:y})]}),(0,r.jsx)("div",{className:"",children:(0,r.jsxs)("div",{className:"flex relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"안녕하세요^^ 인사해볼까요?",required:!0,value:e,onChange:t,onKeyDown:e=>{e.nativeEvent.isComposing||e.nativeEvent.isComposing||"Enter"!==e.key||k()},className:"overflow-visible peer border rounded-xl w-full placeholder:pl-2 py-2 mt-2 pl-3 pr-[58px] focus:outline-none focus:ring-2 focus:ring-violet-600 focus:border-transparent"}),(0,r.jsx)("div",{className:"absolute right-2 -bottom-[0.5px]",children:(0,r.jsx)(a.Z,{svg:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",onClick:k,className:"w-6 h-6 peer-invalid:bg-gray-800 my-1",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})})]})})]})}function y(){let[e,t]=(0,l.useContext)(N),[s,o]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[a,d]=(0,l.useContext)(E),[h,m]=(0,l.useState)(null),[f,p]=(0,l.useState)();(0,l.useEffect)(()=>{let e=async()=>{try{let e=await c.Z.get("/api/chat/roomList");o(e.data)}catch(e){console.log("roomList get",e)}};e()},[]);let g=async()=>{try{await c.Z.post("/api/chat/private/".concat(null==h?void 0:h.roomId,"/entrance")).then(s=>{200===s.status&&(t({ddukddak:!0,context:e.context,roomInfo:h}),d({isConfirm:!1}),i(!1))})}catch(e){console.log("requestChangeRoom err : ",e)}};(0,l.useEffect)(()=>{if(a.isConfirm){var s;(null===(s=e.roomInfo)||void 0===s?void 0:s.roomId)?(null==h?void 0:h.roomId)&&g():(t({ddukddak:!0,context:e.context,roomInfo:h}),d({isConfirm:!1}),i(!1))}},[a.isConfirm]),(0,l.useEffect)(()=>{if(null==h?void 0:h.roomId){var t,s;(null===(t=e.roomInfo)||void 0===t?void 0:t.roomId)===(null==h?void 0:h.roomId)?(alert("당신이 있는 방이야 이놈아."),m(null)):((null===(s=e.roomInfo)||void 0===s?void 0:s.roomId)?p({title:x.Z.CHANGE_ROOM.title,subText:x.Z.CHANGE_ROOM.subText}):p({title:x.Z.ENTER_ROOM.title,subText:x.Z.ENTER_ROOM.subText}),i(!0))}},[null==h?void 0:h.roomId]);let j=e=>{let t=e.currentTarget.getAttribute("data-custom");if(null!==t){let e=JSON.parse(t);e.roomId===(null==h?void 0:h.roomId)?alert("당신이 있는 방이야 이놈아."):m(JSON.parse(t))}};return(0,r.jsxs)("div",{className:"flex flex-col border-2 rounded-3xl py-4 px-5 shadow-2xl h-screen max-h-[50vh] xl:min-h-[85vh]",children:[(0,r.jsx)(v.Z,{text:"전체 뚝딱",isSearch:!0}),n&&h?(0,r.jsx)(u.Z,{title:null==f?void 0:f.title,subText:"".concat(h.roomName," ").concat(null==f?void 0:f.subText),setIsOpen:i,setTime:!1}):null,(0,r.jsx)("div",{className:"divide-y-[1px] space-y-4 mt-2 overflow-auto",children:s.map((e,t)=>(0,r.jsxs)("div",{"data-custom":JSON.stringify(e),onClick:j,className:"flex justify-between px-8 py-3 hover:shadow-sm hover:bg-slate-50 cursor-pointer",children:[(0,r.jsx)("h2",{className:"self-center text-lg font-semibold w-3/5",children:e.roomName}),(0,r.jsxs)("div",{className:"flex flex-col justify-center items-end space-y-1",children:[(0,r.jsx)("span",{className:" bg-violet-500 py-1 px-2 rounded-md text-white shadow-md",children:e.participantsNum}),(0,r.jsxs)("span",{className:"text-sm border-b-2 shadow-sm border-violet-300",children:["폭파까지 ",e.remainingTime]})]})]},t))})]})}let N=(0,l.createContext)([{},()=>null]),E=(0,l.createContext)([{isConfirm:!1},()=>null]);function k(){let[e,t]=(0,l.useState)({}),[s,i]=(0,l.useState)({isConfirm:!1}),a=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=(0,d.Z)("intraId");e||a.push("/enter")});let c=(0,l.useMemo)(()=>[e,t],[e,t]),u=(0,l.useMemo)(()=>[s,i],[s,i]);return(0,r.jsx)(o.Z,{children:(0,r.jsx)("div",{className:"grid gap-4 py-20 px-8 xl:grid-cols-3 h-screen",children:(0,r.jsx)(N.Provider,{value:c,children:(0,r.jsxs)(E.Provider,{value:u,children:[e.ddukddak?(0,r.jsx)(m.Z,{}):(0,r.jsx)(h,{}),e.context?(0,r.jsx)(y,{}):(0,r.jsx)(w,{})]})})})})}}}]);